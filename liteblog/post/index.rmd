---
title: A blog made with litedown and targets
output:
  litedown::html_format:
    meta:
      css: ["default", "../static/custom.css"]
    options:
      toc: true
---

```{r}
#| echo: false
#| results: "asis"

# shared functions
source(fs::path(
  rprojroot::find_root(rprojroot::has_file("_targets.R")),
  "scripts",
  "common.R"
))
opts <- get_options()

# list of posts
post_dir <- fs::path(opts$root, opts$post)
post <- post_dir |>
  fs::dir_ls(regexp = "[.][rR]?md$") |> 
  fs::path_rel(post_dir) |> 
  stringr::str_replace_all("_", "/") |> 
  fs::path_ext_remove() |> 
  setdiff("index") |> 
  stringr::str_replace("$", "/index.html") 

purrr::walk(
  rev(post), 
  \(p) {
    t <- p |> 
      fs::path_dir() |> 
      fs::path_split() |> 
      unlist() |> 
      paste(collapse = " / ")
    l <- paste0("[", t, "](", p, ")")
    cat("-", l, "\n")
  }
)
```

